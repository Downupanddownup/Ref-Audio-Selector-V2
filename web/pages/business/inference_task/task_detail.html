<!DOCTYPE html>
<script>
  const TaskDetailSpace = (function () {
    class C_TaskDetail {
      constructor(viewId, taskId) {
        this.viewId = viewId
        this.taskId = taskId
        this.task = null
      }
      
      loadData(){
        const _this = this
        if (_this.taskId && _this.taskId > 0) {
          
        } else {
          _this.task = new C_ObjInferenceTask({})
          _this.render()
        }
      }
      
      render() {
        const _this = this
        const getTpl = $('#taskDetailTemplate').html();
        // 渲染并输出结果
        layui.laytpl(getTpl).render(_this, function(html){
          const obj = $('#'+_this.viewId)
          obj.html(html)

          obj.find('#compareType').on('change', function(){
            _this.task.compareType = $(this).val()
            _this.render()
          })
          
        });
      }


    }

    function getTaskDetail(viewId, taskId) {
      return new C_TaskDetail(viewId, taskId)
    }

    return {
      getTaskDetail: getTaskDetail
    }
  })()
</script>

<script id="taskDetailTemplate" type="text/html">

  <fieldset class="layui-elem-field layui-field-title">
    <legend>对比参数</legend>
  </fieldset>
  
  <table class="table1">
    <tr>
      <td>比较变量类型：</td>
      <td>
        <select class="customSelect" id="compareType">
          <option value="">请选择</option>
          <option {{isTrue(d.task.compareType=="refer_audio",'selected','')}} value="refer_audio">参考音频</option>
          <option {{isTrue(d.task.compareType=="gpt_model",'selected','')}} value="gpt_model">GPT模型</option>
          <option {{isTrue(d.task.compareType=="vits_model",'selected','')}} value="vits_model">Vits模型</option>
          <option {{isTrue(d.task.compareType=="top_k",'selected','')}} value="top_k">top_k值</option>
          <option {{isTrue(d.task.compareType=="top_p",'selected','')}} value="top_p">top_p值</option>
          <option {{isTrue(d.task.compareType=="temperature",'selected','')}} value="temperature">temperature值</option>
          <option {{isTrue(d.task.compareType=="speed",'selected','')}} value="speed">speed值</option>
          <option {{isTrue(d.task.compareType=="text_delimiter",'selected','')}} value="text_delimiter">文本分隔符</option>
          <option {{isTrue(d.task.compareType=="other",'selected','')}} value="other">其余参数</option>
        </select>
      </td>
    </tr>
  </table>
  
  {{# if (d.task.compareType) { }}


  <fieldset class="layui-elem-field layui-field-title">
    <legend>固定参数</legend>
  </fieldset>
  <table class="table1">
    <tr>
      <td>
        GPT-Sovits 版本：
      </td>
      <td>
        <select class="customSelect">
          <option value="v1">v1</option>
          <option value="v2">v2</option>
        </select>
      </td>
      <td>
        GPT 模型：
      </td>
      <td>
        <select class="customSelect"></select>
        <button type="button" class="layui-btn layui-btn-sm">刷新</button>
      </td>
      <td>
        Vits 模型：
      </td>
      <td>
        <select class="customSelect"></select>
        <button type="button" class="layui-btn layui-btn-sm">刷新</button>
      </td>
    </tr>
    <tr>
      <td>
        top_k值：
      </td>
      <td>
        <input type="number" autocomplete="off" placeholder="top_k值" class="layui-input" style="width: auto;">
      </td>
      <td>
        top_p值：
      </td>
      <td>
        <input type="number" autocomplete="off" placeholder="top_p值" class="layui-input" style="width: auto;">
      </td>
      <td>
        temperature值：
      </td>
      <td>
        <input type="number" autocomplete="off" placeholder="temperature值" class="layui-input" style="width: auto;">
      </td>
    </tr>
    <tr>
      <td>
        文本分隔符：
      </td>
      <td>
        <input type="text" autocomplete="off" placeholder="文本分隔符" class="layui-input" style="width: auto;">
      </td>
      <td>
        speed值：
      </td>
      <td>
        <input type="number" autocomplete="off" placeholder="speed值" class="layui-input" style="width: auto;">
      </td>
      <td>
        其余参数：
      </td>
      <td>
        <input type="text" autocomplete="off" placeholder="其余参数" class="layui-input" style="width: auto;">
      </td>
    </tr>
    <tr>
      <td>参考音频：</td>
      <td>
        15条
      </td>
      <td>推理文本：</td>
      <td colspan="3">
        30份
      </td>
    </tr>
  </table>

  <fieldset class="layui-elem-field layui-field-title">
    <legend>请求地址</legend>
  </fieldset>
  
  <table class="table1">
    <tr>
      <td>
        <input type="text" autocomplete="off" placeholder="其余参数" class="layui-input" style="width: 100%;" disabled value="http://localhost:63342/Ref-Audio-Selector-V2/main.html?_ijt=8ie38tk5kmm54s6uc5rhfcbctk&_ij_reload=RELOAD_ON_SAVE">
      </td>
    </tr>
  </table>

  {{# } }}
  
</script>